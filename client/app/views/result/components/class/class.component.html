<div class="anchor" [attr.id]="classification.id"></div>
<md-card [className]="classification.type.toLowerCase()">
  <md-card-header>
    <a [routerLink]="['/docs', classification.id]" md-card-avatar>
      <fint-fa [name]="classType"></fint-fa>
    </a>
    <md-card-title>
      <h3>
        <span [innerHTML]="classification.name | highlight"></span>
        <span *ngIf="classification.superType && classification.superType.length">
          <fint-fa name="arrow-left"></fint-fa>
          <md-chip *ngFor="let super of classification.superType" color="primary">
            <a [routerLink]="['/docs', super.generalRef.id]">
              {{ super.generalRef.name }}
            </a>
          </md-chip>
        </span>
        <small class="type" [innerHTML]="classification.type | highlight"></small>
      </h3>
    </md-card-title>
  </md-card-header>

  <md-card-content>
    <div class="subtypes" *ngIf="classification.subTypes && classification.subTypes.length">
      <md-chip-list>
        <md-chip *ngFor="let cls of classification.subTypes">
          <a [routerLink]="['/docs', cls.id]">{{ cls.name }}</a>
        </md-chip>
      </md-chip-list>
    </div>

    <app-details *ngIf="classification.documentationBody.length > 0">
      <header [innerHTML]="classification.documentationHeader"></header>
      <span [innerHTML]="classification.documentationBody | MarkdownToHtml"></span>
    </app-details>

    <table *ngIf="classification.ownedAttribute">
      <thead>
        <tr>
          <th class="dropdown"></th>
          <th class="name">Felt</th>
          <th class="type">Type</th>
          <th class="multiplicity">Multiplicity</th>
          <th class="description">Beskrivelse</th>
        </tr>
      </thead>
      <tbody *ngFor="let attribute of classification.ownedAttribute">
        <tr>
          <td class="dropdown" (click)="attribute.isOpen = !attribute.isOpen" [ngClass]="{hasDetails: attribute.documentation.length > 0, isOpen: attribute.isOpen}">
            <fint-fa *ngIf="attribute.documentation.length > 0" [name]="attribute.isOpen ? 'caret-down' : 'caret-right'"></fint-fa>
          </td>
          <td class="name" [innerHTML]="attribute.name | highlight"></td>
          <td class="type">
            <span *ngIf="attribute.isPrimitive">{{ attribute.typeName }}</span>
            <a *ngIf="!attribute.isPrimitive && attribute.typeRef" [routerLink]="['/docs', attribute.typeRef.id]">{{ attribute.typeName }}</a>
          </td>
          <td class="multiplicity">{{ attribute.multiplicity }}</td>
          <td class="description" (click)="attribute.isOpen = !attribute.isOpen" [ngClass]="{hasDetails: attribute.documentationBody.length > 0, isOpen: attribute.isOpen}">
            <fint-fa *ngIf="attribute.documentationBody.length > 0" [name]="attribute.isOpen ? 'caret-down' : 'caret-right'"></fint-fa>
            <i>{{ attribute.documentationHeader }}</i>
          </td>
        </tr>
        <tr class="dropdown-row" *ngIf="attribute.isOpen && attribute.documentationHeader.length > 0">
          <td colspan="5" class="details"><i>{{ attribute.documentationHeader }}</i></td>
        </tr>
        <tr *ngIf="attribute.isOpen && attribute.documentationBody.length > 0">
          <td colspan="5" [innerHTML]="attribute.documentationBody | MarkdownToHtml " class="details"></td>
        </tr>
      </tbody>
    </table>
  </md-card-content>
</md-card>
